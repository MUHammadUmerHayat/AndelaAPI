<section data-ng-controller="AdminController" data-ng-init="viewApplicant()" class="pad">
  <div class="container" data-ng-show="user.role === 'admin'">
    <div class="my_wrapper">
      <ng-include src='"/modules/admin/views/admin.sidebar.html"'></ng-include>

      <div class="admin-view">
      <h3>Fellow Details</h3>
      <ul class="fellow-edit">
        <li>Name: <b data-ng-bind="appt.firstName"></b>
        <b data-ng-bind="appt.lastName"></b></li>
        <li>Email: <b data-ng-bind="appt.email"></b></li>
        <li>Username: <b data-ng-bind="appt.username"></b></li>
        <!-- <li ng-repeat="summary in appt.skillSummary">Skills Summary: <b>{{summary}}</b></li> -->
        
        <li data-ng-show="appt.skillSet">Skillset(s): 
          <div>
            <table class="list list-link">
              <thead>
                <tr>
                  <th>Skill</th>
                  <th>Rating</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
              <tr data-ng-repeat="skillObject in appt.skillSet">
                  <td>{{skillObject.skill.name}}</td>
                  <td>{{skillObject.rating}}</td>
                  <td>
                    <form data-ng-submit='rateFellow(appt._id, skillObject.skill._id, skillObject.updatedRating)' class="form_trainee signin form-horizontal" autocomplete="off">
                      <fieldset>
                        <div class="form-group">
                          <select data-ng-model="skillObject.updatedRating" id="rating">
                            <option ng-repeat="n in [] | range:11:0" value="{{$index}}">{{$index}}</option>
                          </select>
                        </div>
                        <div class="form-group">
                        <button type="submit" class="btn btn-xs btn-primary">Update Rating</button>
                        </div>
                      </fieldset>
                    </form>
                  </td>
              </tr>
            </table>
          </div>
        </li>

        <li data-ng-show="appt.currPlacement">Current Placement:
          <div ng-hide="currPlacementEditorEnabled">
            <p>Company: {{appt.currPlacement.status}} <a ng-href="" ng-click="enableCurrPlacementEditor('company')">Edit</a></p>
          </div>

          <div ng-show="currPlacementEditorEnabled">
            <input type="text" ng-model="editableCurrCompany" ng-show="currPlacementEditorEnabled">
            <a href="" ng-click="saveCurrPlacement('company')">Save</a>
            or
            <a href="" ng-click="disableCurrPlacementEditor('company')">Cancel</a>.
          </div>

          <div ng-hide="startDateEditorEnabled">
            <p>Start Date: {{appt.currPlacement.startDate | date : longDate}} <a ng-href="" ng-click="enableCurrPlacementEditor('startDate')">Edit</a></p>
          </div>

          <div ng-show="startDateEditorEnabled">
            <input type="text" ng-model="editableStartDate" placeholder="MM/DD/YY" ng-show="startDateEditorEnabled">
            <a href="" ng-click="saveCurrPlacement('startDate')">Save</a>
            or
            <a href="" ng-click="disableCurrPlacementEditor('startDate')">Cancel</a>.
          </div>

          <div ng-hide="endDateEditorEnabled">          
            <p>End Date: {{appt.currPlacement.endDate | date : longDate}} <a ng-href="" ng-click="enableCurrPlacementEditor('endDate')">Edit</a></p>
          </div>

          <div ng-show="endDateEditorEnabled">
            <input type="text" ng-model="editableEndDate" placeholder="MM/DD/YY" ng-show="endDateEditorEnabled">
            <a href="" ng-click="saveCurrPlacement('endDate')">Save</a>
            or
            <a href="" ng-click="disableCurrPlacementEditor('endDate')">Cancel</a>.
          </div>
        </li>

        <li>
          <p>Work History:</p>
          
          <ol>
            <li data-ng-repeat="workHist in appt.workHistory">
              <b>Company: {{workHist.company}}</b><br>
              <b>Job Description: {{workHist.jobDescription}}</b><br>
              <b>Location: {{workHist.location}}</b><br>
              <b>From: {{workHist.from | date : longDate}}</b><br>
              <b>From: {{workHist.to | date : longDate}}</b>
            </li>
          </ol>
        </li>
      </ul>


      <form data-ng-submit='addPlacement()' class="basic-grey placement" autocomplete="off">
        <fieldset>
          <p>
            <span>Add Work Placement</span>
          </p>
          <label class="company">
              <span>Company:</span>
              <input type="text" data-ng-model="data.company" id="company" required>
          </label>

          <label class="jobDescription">
              <span>Job Description:</span>
              <input type="text" data-ng-model="data.jobDescription" id="jobDescription" required>
          </label>

          <div class="from">
          <label class="startDate">
              <span>From:</span>
              <input type="text" data-ng-model="data.start_date" id="from" placeholder="M/DD/YY" required>
          </label>
          </div>

          <div class="to">
          <label class="endDate">
              <span>To:</span>
              <input type="text" data-ng-model="data.end_date" id="to" placeholder="M/DD/YY" required>
          </label>
          </div>

          <button type="submit" class="btn btn-xs btn-primary">Submit</button>

          <div data-ng-show="error" class="text-center text-danger">
              <strong data-ng-bind="error"></strong>
          </div>

        </fieldset>
      </form>


    </div>  
  </div>
  </div>

  <div class="container" data-ng-show="user.role !== 'admin'">
    <b class="reqLogin">You have no access to this page. You need to <a href="/#!/admin">signin</a> as an admin.</b>
  </div>
</section>
